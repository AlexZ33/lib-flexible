!function(a,b){function c(){var b=f.getBoundingClientRect().width;b/l>540&&(b=540*l);var c=b/10;f.style.fontSize=c+"px",n.rem=a.rem=c}var d,e=a.document,f=e.documentElement,g=e.querySelector('meta[name="viewport"]'),h=e.querySelector('meta[name="flexible"]'),i=e.querySelector('meta[name="flexible-in-x5"]'),j=!0,k=["MI MAX"],l=0,m=0,n=b.flexible||(b.flexible={});if(g){console.warn("将根据已有的meta标签来设置缩放比例");var o=g.getAttribute("content").match(/initial\-scale=([\d\.]+)/);o&&(m=parseFloat(o[1]),l=parseInt(1/m))}else if(h){var p=h.getAttribute("content");if(p){var q=p.match(/initial\-dpr=([\d\.]+)/),r=p.match(/maximum\-dpr=([\d\.]+)/);q&&(l=parseFloat(q[1]),m=parseFloat((1/l).toFixed(2))),r&&(l=parseFloat(r[1]),m=parseFloat((1/l).toFixed(2)))}}if(i&&(j="false"!==i.getAttribute("content")),!l&&!m){var s=(a.navigator.appVersion.match(/android/gi),a.chrome),t=a.navigator.appVersion.match(/iphone/gi),u=a.devicePixelRatio,v=/TBS\/\d+/.test(a.navigator.userAgent),w=k.every(function(a){return!new RegExp(a).test(navigator.userAgent)});l=t||s||v&&j&&w?u>=3&&(!l||l>=3)?3:u>=2&&(!l||l>=2)?2:1:1,m=1/l}if(f.setAttribute("data-dpr",l),!g)if(g=e.createElement("meta"),g.setAttribute("name","viewport"),g.setAttribute("content","initial-scale="+m+", maximum-scale="+m+", minimum-scale="+m+", user-scalable=no"),f.firstElementChild)f.firstElementChild.appendChild(g);else{var x=e.createElement("div");x.appendChild(g),e.write(x.innerHTML)}a.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(c,300)},!1),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(d),d=setTimeout(c,300))},!1),"complete"===e.readyState?e.body.style.fontSize=12*l+"px":e.addEventListener("DOMContentLoaded",function(a){e.body.style.fontSize=12*l+"px"},!1),c(),n.dpr=a.dpr=l,n.refreshRem=c,n.rem2px=function(a){var b=parseFloat(a)*this.rem;return"string"==typeof a&&a.match(/rem$/)&&(b+="px"),b},n.px2rem=function(a){var b=parseFloat(a)/this.rem;return"string"==typeof a&&a.match(/px$/)&&(b+="rem"),b}}(window,window.lib||(window.lib={}));